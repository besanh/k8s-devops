k8s-begining:
  image:
    tag: "${IMAGE_TAG}"

  service:
    type: LoadBalancer

  vault:
    enabled: true
    role: "k8s-begining"
    secretPath: "secret/dev/data/k8s-begining/database"

  config:
    enabled: true
    files:
      config.tpl: |
        server:
          http:
            addr: 0.0.0.0:8000
            timeout: 1s
          grpc:
            addr: 0.0.0.0:9000
            timeout: 1s
        data:
          database:
            driver: pgx
            # Credentials injected via envsubst from Vault secrets
            source: postgres://${DB_USER}:${DB_PASS}@${DB_HOST}:${DB_PORT}/${DB_NAME}?sslmode=disable
          redis:
            addr: redis:6379
            read_timeout: 0.2s
            write_timeout: 0.2s
        log:
          level: debug
